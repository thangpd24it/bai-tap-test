<!DOCTYPE html>
<html>
<head>
    <title>Music Recommender</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        .section { margin-bottom: 30px; border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .song-card { display: inline-block; width: 200px; border: 1px solid #eee; margin: 5px; padding: 10px; vertical-align: top;}
        .btn { padding: 5px 10px; background: #007bff; color: white; text-decoration: none; border-radius: 3px; }
        .mood-btn { padding: 8px 15px; margin-right: 5px; cursor: pointer; background: #eee; border: none; }
        .mood-btn:hover { background: #ddd; }
    </style>
</head>
<body>
    <h1>Ch√†o, {{ username }}! <a href="/logout" style="font-size: small;">(ƒêƒÉng xu·∫•t)</a></h1>
    
    <div class="section">
        <h2>üî• G·ª£i √Ω ri√™ng cho b·∫°n (D·ª±a tr√™n l·ªãch s·ª≠ ƒë√°nh gi√°)</h2>
        {% if collab_recommendations %}
            {% for song in collab_recommendations %}
                <div class="song-card">
                    <b>{{ song.title }}</b><br>
                    <small>{{ song.artist }}</small><br>
                    <form action="/rate_song/{{ song.id }}" method="post">
                        <input type="number" name="rating" min="1" max="5" style="width: 40px" required>
                        <button type="submit">Rate</button>
                    </form>
                </div>
            {% endfor %}
        {% else %}
            <p>Ch∆∞a ƒë·ªß d·ªØ li·ªáu. H√£y ƒë√°nh gi√° th√™m b√†i h√°t b√™n d∆∞·ªõi ƒë·ªÉ h·ªá th·ªëng hi·ªÉu gu c·ªßa b·∫°n!</p>
        {% endif %}
    </div>

    <div class="section">
        <h2>üòä B·∫°n ƒëang c·∫£m th·∫•y th·∫ø n√†o?</h2>
        <form method="POST" action="/">
            <button type="submit" name="mood" value="Happy" class="mood-btn">Vui v·∫ª (Happy)</button>
            <button type="submit" name="mood" value="Sad" class="mood-btn">Bu·ªìn (Sad)</button>
            <button type="submit" name="mood" value="Chill" class="mood-btn">Th∆∞ gi√£n (Chill)</button>
            <button type="submit" name="mood" value="Energetic" class="mood-btn">S√¥i ƒë·ªông (Energetic)</button>
        </form>

        {% if selected_mood %}
            <h3>K·∫øt qu·∫£ cho t√¢m tr·∫°ng: {{ selected_mood }}</h3>
            {% for song in mood_recommendations %}
                <div class="song-card">
                    <b>{{ song.title }}</b><br>
                    <small>{{ song.artist }}</small>
                </div>
            {% endfor %}
        {% endif %}
    </div>

    <div class="section">
        <h2>üéµ Kh√°m ph√° & ƒê√°nh gi√° (ƒê·ªÉ g·ª£i √Ω chu·∫©n h∆°n)</h2>
        {% for song in all_songs %}
            <div class="song-card">
                <b>{{ song.title }}</b><br>
                <small>{{ song.artist }}</small><br>
                <form action="/rate_song/{{ song.id }}" method="post">
                    <input type="number" name="rating" min="1" max="5" style="width: 40px" required>
                    <button type="submit">Rate</button>
                </form>
            </div>
        {% endfor %}
    </div>

</body>
</html>